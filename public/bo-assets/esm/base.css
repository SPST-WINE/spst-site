/* ======================================================================
   SPST Back Office — base styles (final)
   ====================================================================== */

/* ---- Vars / palette -------------------------------------------------- */
:root{
  --site-nav-h: 0px;
  --bb-h: 56px;

  --bg:#0b1020;
  --card:#141a2f;
  --muted:#97a0b3;
  --text:#e7ecf5;
  --accent:#4f7cff;
  --ok:#1fbf75;
  --warn:#ffb020;
  --err:#ff5a65;
  --brand-orange:#f7911e;
  --spst-orange:#f7911e;
  --elev-bg: rgba(19,22,30,.72);
}

/* ---- Reset ----------------------------------------------------------- */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu;
  background: var(--bg);
  color: var(--text);
}

/* ---- Brand bar (se usata) ------------------------------------------- */
.brandbar{
  position: sticky;
  top: var(--site-nav-h);
  z-index: 1000;
  background: #0b1020;
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.brandbar .wrap{
  max-width:1100px; margin:0 auto; padding:10px 16px;
  display:flex; align-items:center; gap:12px; justify-content:space-between;
}
.brand-left{ display:flex; align-items:center; gap:10px; }
.brandbar .logo{ height:24px; width:auto; display:block }
.brandbar .divider{ width:1px; height:22px; background:rgba(255,255,255,.12) }
.brandbar .title{ font-weight:700; letter-spacing:.2px }

/* ---- Header (3 righe: brand, tabbar, tools) ------------------------- */
header{
  position: sticky;
  top: calc(var(--site-nav-h) + var(--bb-h));
  z-index: 900;
  background: #0b1020;
  border-bottom: 1px solid rgba(255,255,255,.06);
}

/* Topbar compatta/traslucida */
.bo-header{
  position: sticky; top: 0; z-index: 100;
  backdrop-filter: saturate(120%) blur(6px);
  background: var(--elev-bg);
  border-bottom: 1px solid rgba(255,255,255,.06);
  transition: padding .15s ease, backdrop-filter .2s ease;
}
.bo-header.is-compact{ padding-block: 6px; }

/* Riga strumenti (checkbox + search) sotto le tab */
.bo-tools{
  display: grid;
  grid-template-columns: auto minmax(260px,520px);
  align-items: center;
  gap: 12px;
  padding: 8px 0 10px;
}
@media (max-width: 860px){
  .bo-tools{ grid-template-columns: 1fr; }
}

/* ---- Layout helpers -------------------------------------------------- */
.wrap{ max-width:1100px; margin:0 auto; padding:16px }
.row{ display:flex; gap:12px; flex-wrap:wrap; align-items:center }
.row.spaced{ justify-content:space-between }

/* ---- Inputs / chips / buttons --------------------------------------- */
input[type="text"], select{
  background:#0e152b; color:var(--text);
  border:1px solid rgba(255,255,255,.08);
  border-radius:12px; padding:12px 14px; outline:none; width:260px;
}
input::placeholder{ color:#8ea0c2; opacity:.9 }

.chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 12px; border-radius:999px;
  background:#0e152b; border:1px solid rgba(255,255,255,.08);
  cursor:pointer; user-select:none;
}
.chip input{ accent-color:var(--accent) }

.btn{
  background:var(--accent); color:#fff; padding:10px 14px;
  border-radius:12px; border:none; cursor:pointer; font-weight:600
}
.btn.ghost{ background:transparent; border:1px solid rgba(255,255,255,.15) }

.mini-btn{
  font-size:11px; padding:6px 10px; border-radius:8px;
  border:1px solid rgba(255,255,255,.18); background:transparent; color:var(--text); cursor:pointer;
}
.mini-btn:hover{ background:rgba(255,255,255,.06) }
.mini-btn.primary{ background:#4d6fff; color:#fff; border:1px solid transparent; }
.mini-btn.success{ background:rgba(31,191,117,.18); color:#8ff0c1; border-color:rgba(31,191,117,.35); }
.mini-btn.warn{ background:rgba(255,176,32,.18); color:#ffd48a; border-color:rgba(255,176,32,.35); }
.btn[disabled], .mini-btn[disabled]{ opacity:.55; cursor:not-allowed; filter:grayscale(.2) }

/* ---- Cards / grid ---------------------------------------------------- */
.grid{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:12px }
.card{
  background: var(--card);
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.16);
  box-shadow:
    0 10px 28px rgba(0,0,0,.28),
    inset 0 0 0 1px rgba(255,255,255,.06);
  padding: 16px;
}
.card h3{ margin:0 0 8px 0; font-size:16px }
.actions{ display:flex; gap:8px; margin-top:10px }

/* Header card pulito */
.card .card-head{
  display:grid; grid-template-columns:1fr auto; align-items:center; gap:8px; margin-bottom:6px;
}
.card .title-line{ display:flex; align-items:center; gap:10px; flex-wrap:wrap }
.card .dest{ font-weight:600; opacity:.95 }

/* Pillola ID arancione SPST */
.id-chip{
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
  font-size:.85rem;
  background: var(--spst-orange);
  color:#0a0d14;
  border:0;
  padding:3px 8px;
  border-radius:10px;
  letter-spacing:.02em;
}
/* variante “brand” */
.id-chip--spst{
  background: var(--brand-orange) !important;
  color: #0b1020;
  border-color: transparent;
  font-weight: 700;
}

/* ---- Badges / small / helpers --------------------------------------- */
.small{ font-size:12px; color:var(--muted) }
.badge{
  display:inline-block; padding:4px 8px; border-radius:999px;
  font-size:12px; font-weight:600; border:1px solid rgba(255,255,255,.12)
}
.badge.green{ background:rgba(31,191,117,.12); color:#8ff0c1; border-color:rgba(31,191,117,.35) }
.badge.yellow{ background:rgba(255,176,32,.12); color:#ffd48a; border-color:rgba(255,176,32,.35) }
.badge.gray{ background:rgba(151,160,179,.12); color:#c7cfdf; border-color:rgba(151,160,179,.35) }
.hidden{ display:none }

/* ---- KV grid (scheda) ----------------------------------------------- */
.kv{ display:grid; grid-template-columns:170px 1fr; gap:6px 12px; margin:8px 0 }
.kv .k{ color:var(--muted); font-size:12px }

/* ---- Documenti ------------------------------------------------------- */
.docs{ display:flex; flex-wrap:wrap; gap:8px; margin-top:6px }
.doc{
  display:flex; flex-wrap:wrap; align-items:center; gap:8px;
  padding:8px 10px; border-radius:10px;
  border:1px dashed rgba(255,255,255,.12);
}
.doc.ok{
  border-style:solid; border-color:rgba(31,191,117,.55);
  background:rgba(31,191,117,.12);
}
.doc.missing{
  border-color:rgba(255,90,101,.55);
  background:rgba(255,90,101,.12);
}
.doc a{ color:inherit; text-decoration:none }
.doc .generate-doc{ /* bottoni genera */
  /* usa .mini-btn di base; qui solo micro-tocco per spacing */
  margin-left:0;
}

/* ---- Tabelle colli --------------------------------------------------- */
table.colli{ width:100%; border-collapse:collapse; margin-top:6px }
table.colli th, table.colli td{
  padding:6px 8px; font-size:12px;
  border-bottom:1px solid rgba(255,255,255,.06);
}
table.colli tbody tr:nth-child(odd){ background:rgba(255,255,255,.02) }
table.colli td:last-child, table.colli th:last-child{ text-align:right }
/* centra la colonna dimensioni */
table.colli th:first-child, table.colli td:first-child{ text-align:center }

/* ---- Label rules panel ---------------------------------------------- */
.label-panel{
  display:none; margin-top:10px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.03);
  border-radius:12px; padding:12px;
}
.label-panel.show{ display:block }
.label-title{ font-weight:600; margin:0 0 8px 0; font-size:14px }
.label-items{ display:flex; flex-wrap:wrap; gap:6px }
.label-badge{ font-size:11px; padding:6px 8px; border-radius:999px; background:#0e152b; border:1px solid rgba(255,255,255,.12) }
.label-note{ font-size:12px; color:#c7cfdf; margin-top:8px }

/* ---- Tracking row ---------------------------------------------------- */
.track{
  display:flex; flex-wrap:wrap; align-items:center; gap:8px; margin-top:10px;
  padding:10px; border:1px solid rgba(255,255,255,.08); border-radius:12px; background:rgba(255,255,255,.02);
}
.track input[type="text"], .track select{ width:auto; min-width:160px; padding:10px 12px }
.track .link{ margin-left:auto }

/* ---- Details / print grid ------------------------------------------- */
.details{ display:none; margin-top:8px }
.details.show{ display:block }
.print-grid{
  display:grid; grid-template-columns:220px 1fr; gap:6px 12px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.08);
  border-radius:12px; padding:12px;
}
.print-grid .k{ color:var(--muted); font-size:12px }

/* ---- Misc (toast, links, separators) -------------------------------- */
.toast{
  position:fixed; bottom:18px; right:18px; background:#101734;
  border:1px solid rgba(255,255,255,.12); color:#fff;
  padding:12px 14px; border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,.35);
  opacity:0; transform:translateY(8px); transition:all .2s;
}
.toast.show{ opacity:1; transform:translateY(0) }
a.link-orange, .link-orange{ color:var(--warn); text-decoration:none; font-weight:600 }
a.link-orange:hover{ opacity:.9 }
.hr{ height:1px; background:rgba(255,255,255,.08); margin:10px 0 }
.banner{
  display:none; background:rgba(255,90,101,.12);
  border:1px solid rgba(255,255,255,.45); color:#ffc0c5;
  padding:10px 12px; border-radius:12px; margin:12px auto 0; max-width:1100px;
}
.banner.show{ display:block }

/* ---- Tabbar 50/50 ---------------------------------------------------- */
.hairline{ height:1px; background:rgba(255,255,255,.08); margin:10px 0 }
.tabbar{ display:grid; grid-template-columns:1fr 1fr; gap:8px }
.tabbar a{
  display:block; text-align:center; padding:12px 16px; border-radius:12px;
  border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.03);
  color:var(--text); text-decoration:none; font-weight:700; letter-spacing:.2px;
}
.tabbar a:hover{ background:#0e152b }
.tabbar a.is-active{
  background:#0e152b; border-color:rgba(79,124,255,.45);
  box-shadow: inset 0 0 0 1px rgba(79,124,255,.35), 0 2px 10px rgba(0,0,0,.15);
  color:#fff;
}

/* ---- Router views ---------------------------------------------------- */
.anchor{ position:absolute; width:0; height:0; overflow:hidden }
.view{ display:none }
#view-spedizioni{ display:block }  /* default */

/* ---- Flash util ------------------------------------------------------ */
.flash{ animation:flash 1.1s ease-out }
@keyframes flash{
  0%{ box-shadow:0 0 0 0 rgba(79,124,255,.55) }
  100%{ box-shadow:0 0 0 14px rgba(79,124,255,0) }
}

/* Rendi la topbar non fissa (richiesto) */
.bo-header{ position: static; backdrop-filter:none; background: transparent; border-bottom:none; }

/* Pill stato import destinatario */
.import-flag{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 16px;
  font-weight: 600;
  font-size: 12px;
  line-height: 1;
  border: 1px solid transparent;
  user-select: none;
}
.import-flag .dot{
  width: 8px; height: 8px;
  border-radius: 50%;
  background: currentColor;
  opacity: .9;
}
.import-flag.yes{
  background: rgba(31,191,117,.12);
  color: #8ff0c1;
  border-color: rgba(31,191,117,.35);
}
.import-flag.no{
  background: rgba(255,90,101,.12);
  color: #ffc0c5;
  border-color: rgba(255,90,101,.35);
}

/* Card con documentazione completa */
.card.ok-docs{
  border-color: rgba(31,191,117,.45) !important;
  box-shadow:
    inset 0 0 0 1px rgba(31,191,117,.30),
    0 6px 24px rgba(31,191,117,.12);
}

/* Mail row (coerente) */
.mail-row{
  margin-top: 10px;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.025);
  border-radius: 10px;
}
.mail-row.disabled{ opacity:.55; pointer-events:none; }

.mail-controls{ display:flex; align-items:center; gap:8px; margin-top:8px; }

.mail-input{
  flex: 1 1 auto;
  height: 36px;
  padding: 0 12px;
  border: 1px solid rgba(255,255,255,.12);
  background: #0f1724;
  color: #e6ebf5;
  border-radius: 8px;
  outline: none;
}
.mail-input::placeholder{ color: #7d8aa8; opacity:.9; }
.mail-input:focus{
  border-color: #4d6fff80;
  box-shadow: 0 0 0 3px #4d6fff22 inset;
}

/* Input di servizio */
.nice-input {
  width: 340px; max-width: 100%;
  height: 36px; padding: 0 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.15);
  background: rgba(255,255,255,.06);
  color: #e9eef7;
  outline: none;
  transition: border-color .15s, background .15s, box-shadow .15s;
}
.nice-input:focus {
  border-color: #f7911e;
  background: rgba(255,255,255,.10);
  box-shadow: 0 0 0 3px rgba(247,145,30,.18);
}
.nice-input::placeholder { color:#9fb2cc; opacity:.9; font-style:italic; }
.mail-row.disabled .nice-input { opacity:.6; cursor:not-allowed; }
